<div class="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-6 gradient">
  <!-- Progress Indicator & End Interview -->
  <div class="max-w-6xl w-full bg-white shadow-md rounded-xl p-4 mb-1 flex justify-between items-center">
    <h2 class="text-xl font-semibold text-gray-900">Mock Interview</h2>
    <div class="flex items-center space-x-4">
      <button (click)="toggleMode()"
              class="px-4 py-2 rounded-md text-white font-semibold"
              [ngClass]="interviewMode === 'voice' ? 'bg-indigo-600 hover:bg-indigo-500' : 'bg-gray-400 hover:bg-gray-500'"
              [disabled]="interviewEnded">
        {{ interviewMode === 'voice' ? 'Voice Mode' : 'Text Mode' }}
      </button>
      <button (click)="endInterview()"
              class="px-4 py-2 rounded-md text-white font-semibold transition-all duration-200"
              [ngClass]="interviewEnded ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-500 hover:bg-red-400'"
              [disabled]="interviewEnded">
        End Interview
      </button>
      <button (click)="reviewCode()"
        class="px-4 py-2 rounded-md text-white font-semibold transition-all duration-200"
        [ngClass]="interviewEnded ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-500 hover:bg-red-400'"
        [disabled]="interviewEnded">
        Get Help
      </button>
      <div *ngIf="interviewEnded" class="mt-6">
        <button (click)="generateFeedback()"
          class="px-4 py-2 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-500">
          Get Interview Feedback
        </button>
      </div>
      
    </div>
  </div>

  <!-- Main Interview Container -->
  <!-- Main Container: Interview on the Left, Code Editor on the Right -->
  <div class="grid grid-cols-2 gap-6 max-w-6xl w-full bg-transparent rounded-xl p-6">
    <!-- Interview Window (Left Side) -->
    <div class="bg-white shadow-md rounded-xl p-6 flex flex-col h-[600px]">
      <!-- Chat Window -->
      <div class="flex flex-col space-y-4 h-full overflow-y-auto no-scrollbar pb-24 px-4" #chatContainer>
        <div *ngFor="let message of chatMessages; let last = last" class="flex w-full" [ngClass]="{'mb-16': last, 'mb-4': !last}">
          <!-- AI Message (Left Side) -->
          <div *ngIf="message.sender === 'ai'" class="bg-gray-200 text-gray-900 p-3 rounded-lg max-w-[80%] self-start animate-fadeIn">
            {{ message.text }}
          </div>
          <!-- User Message (Right Side) -->
          <div *ngIf="message.sender === 'user'" class="bg-indigo-500 text-white p-3 rounded-lg max-w-[80%] self-end ml-auto animate-fadeIn">
            {{ message.text }}
          </div>
        </div>
      </div>
      
      <!-- Bottom: User Input Field -->
      <div class="w-full bg-white border-t p-4 flex items-center">
        <input [formControl]="userMessageControl" type="text"
              class="flex-grow p-3 rounded-md border focus:ring-2 focus:ring-indigo-600 outline-none transition-all duration-200"
              [class.bg-gray-200]="interviewMode === 'voice' || interviewEnded"
              placeholder="Type your response..."
              [attr.disabled]="interviewMode === 'voice' || interviewEnded ? true : null">
        <button *ngIf="interviewMode === 'text' && !interviewEnded"
                (click)="sendMessage()"
                class="ml-3 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-500">
          Send
        </button>
      </div>
    </div>

    <!-- Code Editor (Right Side) -->
    <div class="bg-white shadow-md rounded-xl p-6 h-[600px] w-[50rem] flex flex-col">
      <app-code-editor [code]="code"></app-code-editor>
    </div>
  </div>

  
</div>
